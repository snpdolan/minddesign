(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){"use strict";(function(e){var n=a(19),r=a(20),o=a(22),c=a(21),i=a(24),l=a(23),s=a(0),u=a.n(s),m=a(7),d=a(8),p=a(4),f=a(6),b=a(71),h=new f.a.Scene;h.background=new f.a.Color(14737632);var g,v,E=new f.a.GridHelper(160,10);E.rotation.x=Math.PI/2,h.add(E),window.innerWidth<=768?(g=.8*window.innerWidth,v=.5*window.innerHeight):(g=.37*window.innerWidth,v=.5*window.innerHeight);var w=new f.a.PerspectiveCamera(50,g/v,1,1e3);w.position.set(0,0,200);var y=new f.a.WebGLRenderer({antialias:!0});y.setPixelRatio(window.devicePixelRatio),y.setSize(g,v),new f.a.OrbitControls(w,y.domElement).screenSpacePanning=!0;var N,S={currentModel:"tiger.svg",extrude:!1},O=new f.a.SVGLoader,j=new f.a.STLExporter,x=document.createElement("a");x.style.display="none",document.body.appendChild(x);var D,k=function e(){requestAnimationFrame(e),y.render(h,w)},R=function(){window.innerWidth<=768?(g=.8*window.innerWidth,v=.5*window.innerHeight):(g=.37*window.innerWidth,v=.5*window.innerHeight),w.aspect=g/v,w.updateProjectionMatrix(),y.setSize(g,v)},M=function e(t){for(;t.children.length>1;)e(t.children[t.children.length-1]),t.remove(t.children[t.children.length-1]);t.geometry&&t.geometry.dispose(),void 0!==t.material&&(void 0!==t.material.length?t.material.forEach(function(e){e.dispose()}):t.material.dispose()),t.texture&&t.texture.dispose()},C=function(e,t){e.scale.multiplyScalar(t),e.scale.y*=-1},G=function(e,t){I(new Blob([e],{type:"application/octet-stream"}),t)},I=function(e,t){x.href=URL.createObjectURL(e),x.download=t,x.click()},U=function(e){for(var t=e.filter(function(e){return 0!==e}),a=[],n=0;n<t.length;n+=2){var r=new f.a.Vector2(t[n],t[n+1]);a.push(r)}return a},A=function(e,t,a){return new f.a.MeshBasicMaterial({color:(new f.a.Color).setStyle(e),opacity:t,transparent:a,side:f.a.DoubleSide,depthWrite:!1})},P=function(e,t){O.load(e,function(a){var n=a.paths;N=new f.a.Group;var r={depth:7,steps:1,bevelEnabled:!1,bevelThickness:2,bevelSize:4,bevelSegments:1};!function(e,t){var a;t.includes("tiger")?(a=.25,N.position.x=-70,N.position.y=70):(a=.6,N.position.x=-85,N.position.y=85),C(N,a),N.updateMatrixWorld(!0)}(0,e);for(var o=0;o<n.length;o++){var c=n[o],i=c.userData.style.fill;if(void 0!==i&&"none"!==i)for(var l=A(i,c.userData.style.fillOpacity,c.userData.style.fillOpacity<1),s=c.toShapes(!0),u=0;u<s.length;u++){var m=s[u],d=new f.a.ShapeBufferGeometry(m),p=new f.a.Mesh(d,l);N.add(p)}var b=c.userData.style.stroke;if(void 0!==b&&"none"!==b){for(var g=A(b,c.userData.style.strokeOpacity,c.userData.style.strokeOpacity<1),v=0,E=c.subPaths.length;v<E;v++){var w,y,S,O=c.subPaths[v];if(t){if(v<c.subPaths.length){w=new f.a.SVGLoader.pointsToStroke(O.getPoints(),c.userData.style);for(var j=U(w.attributes.position.array),x=0;x<j.length;x+=3){var D=new f.a.Shape([j[x],j[x+1],j[x+2]]);D&&(S=new f.a.ExtrudeBufferGeometry(D,r),y=new f.a.Mesh(S,g),N.add(y))}}}else v<c.subPaths.length&&(w=new f.a.SVGLoader.pointsToStroke(O.getPoints(),c.userData.style))&&(y=new f.a.Mesh(w,g),N.add(y))}h.add(N)}}var k=A(65535,.3,!0);!function(e,t,a,n,r){var o=new f.a.BoxHelper(a,16776960),c=o.geometry.boundingSphere.center.x,i=o.geometry.boundingSphere.center.y;if(e&&!r.includes("tiger")){var l;if("circle"===t){var s=1/a.scale.x*o.geometry.boundingSphere.radius,u=new f.a.CylinderBufferGeometry(s,s,3,64);(l=new f.a.Mesh(u,n)).position.set(1/a.scale.x*(Math.abs(a.position.x)+c),-1/a.scale.y*(Math.abs(a.position.y)-i),1.5),l.rotation.set(Math.PI/2,0,0)}else"square"===t&&(l=new f.a.BoxHelper(a,16776960));a.add(l),h.updateMatrixWorld(!0)}}(t,"circle",N,[g,k],e)},function(e){},function(e){console.log("An error happened")})},F=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(o.a)(this,Object(c.a)(a).call(this,e))).createGUI=function(){D&&D.destroy(),(D=new b.GUI({width:150})).add(S,"extrude").name("Extrude?").onChange(function(){M(h);var e="public/"+t.props.currentModel;t.setState({extrude:!t.state.extrude},function(){P(e,t.state.extrude)})})},t.saveSVG=function(){var e="download/"+this.props.currentModel;x.href=e,x.download="myDesign.svg",x.click()},t.state={circle:!0,extrude:!1},t.createGUI=t.createGUI.bind(Object(i.a)(t)),t.saveSVG=t.saveSVG.bind(Object(i.a)(t)),t.renderDownloadButton=t.renderDownloadButton.bind(Object(i.a)(t)),t}return Object(l.a)(a,t),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.mount.appendChild(y.domElement),M(h),this.createGUI(),this.mount.prepend(D.domElement),P("public/tiger.svg",!1),window.addEventListener("resize",R,!1),k()}},{key:"componentDidUpdate",value:function(){var e="public/"+this.props.currentModel;M(h),P(e,this.state.extrude),k()}},{key:"renderDownloadButton",value:function(t){var a=this;return t?u.a.createElement("button",{className:"btn btn-block btn-primary mb-2",onClick:function(e){e.preventDefault(),function(e){C(e,.15),e.updateMatrixWorld(!0);var t=j.parse(e,{binary:!0});G(t,"thing.stl"),C(e,6.1),e.updateMatrixWorld(!0)}(N)}},"Download As STL"):u.a.createElement("button",{className:"btn btn-block btn-primary mb-2",onClick:function(t){t.preventDefault(),console.log(e),a.saveSVG()}},"Download As SVG")}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"container text-center"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-6"},this.renderDownloadButton(this.state.extrude)),u.a.createElement("div",{className:"col-6"},u.a.createElement("button",{className:"btn btn-block btn-success mb-2",onClick:function(e){e.preventDefault(),alert("Feature not live yet! \n Check back in on Demo Night.")}},"Save My Design"))),u.a.createElement("div",{ref:function(t){return e.mount=t}}),u.a.createElement("button",{className:"btn btn-block btn-secondary",onClick:function(e){return M(h)}},"Clear Canvas"))))}}]),a}(s.Component);t.a=Object(d.b)(function(e){return{currentModel:e.currentModel,timeStamp:e.timeStamp}},function(e){return Object(p.b)({renderDrawing:m.renderDrawing,getFile:m.getFile},e)})(F)}).call(this,"/")},115:function(e,t,a){e.exports=a(247)},246:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),c=a(29),i=a(52),l=a(8),s=a(4),u=a(109),m=a(7),d=a(76),p={authenticated:localStorage.getItem("token")||"",email:localStorage.getItem("email")||"",errorMessage:""},f=a(250),b=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.AUTH_USER:return Object(d.a)({},e,{authenticated:t.payload.token,email:t.payload.email});case m.AUTH_ERROR:return Object(d.a)({},e,{errorMessage:t.payload});default:return e}},form:f.a,timeStamp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case m.SAVE_DRAWING:case m.GET_FILE:return{timeStamp:new Date};default:return e}},currentModel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tiger.svg",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SAVE_DRAWING:return t.payload.file;default:return e}}}),h=a(19),g=a(20),v=a(22),E=a(21),w=a(23);var y=Object(l.b)(function(e){return{authenticated:e.auth.authenticated,email:e.auth.email}},m)(function(e){var t=e.authenticated,a=e.email,n=e.signout,c=function(){n()};return r.a.createElement("nav",{className:"navbar fixed-top navbar-dark bg-dark align-middle text-align-middle"},r.a.createElement(o.c,{className:"navbar-brand",to:"/"},"MindDesign"),r.a.createElement("div",{className:""},r.a.createElement("ul",{className:"navbar-nav mr-2"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item mr-3"},a),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{onClick:c,className:"btn btn-md btn-info"},"Sign Out"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item mx-2"},r.a.createElement(o.b,{to:"/signup",className:"btn btn-sm btn-primary"},"Sign Up")),r.a.createElement("li",{className:"nav-item mx-2"},r.a.createElement(o.b,{to:"/signin",className:"btn btn-sm btn-success"},"Sign In"))))))}),N=a(112),S=a(24),O=a(114),j=a.n(O),x=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(E.a)(t).call(this,e))).createRandomNumber=function(){return Math.floor(1e7*Math.random())},a.createFileName=function(){return a.props.auth.authenticated?"".concat(a.props.auth.email,"-").concat(a.createRandomNumber(),".svg"):"guest-".concat(a.createRandomNumber(),".svg")},a.clear=function(){a.setState({fileName:a.createFileName()},function(){a.sigPad.clear()})},a.renderDrawing=function(){a.setState({svgDataURL:a.sigPad.toDataURL("image/svg+xml")},function(){var e=a.state.svgDataURL.split(",");a.props.updateDrawing(a.state.fileName,atob(e[1]))})},a.state={svgDataURL:null,fileNumber:null},a.sigPad={},a.createRandomNumber=a.createRandomNumber.bind(Object(S.a)(a)),a.createFileName=a.createFileName.bind(Object(S.a)(a)),a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.setState({fileName:this.createFileName()})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container text-center justify-content-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h3",{className:"text-center justify-content-center"},"Start Sketching:"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(j.a,{ref:function(t){e.sigPad=t},penColor:"black",backgroundColor:"rgb(255,255,255)",canvasProps:{width:300,height:300,minwidth:30,maxwidth:35,mindistance:10,throttle:0,className:"sigPad mt-4"}}))),r.a.createElement("button",{className:"btn btn-secondary btn-lg mr-2",onClick:this.clear},"Clear Pad"),r.a.createElement("button",{className:"btn btn-success btn-lg",onClick:this.renderDrawing},"Draw To Canvas"))}}]),t}(n.Component);var D=Object(l.b)(function(e){return{auth:e.auth,timeStamp:e.timeStamp}},function(e){return Object(s.b)({updateDrawing:m.updateDrawing,getFile:m.getFile},e)})(x),k=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("div",{className:"jumbotron mt-2"},r.a.createElement("h1",null,"Hello, User"),r.a.createElement("p",null," We'll probably put some user info here? ",r.a.createElement("i",{className:"fas fa-crown"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6 mb-4"},r.a.createElement(N.a,null)),r.a.createElement("div",{className:"col-12 col-md-6 canvas text-center mb-5"},r.a.createElement(D,null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-1"})))},R=a(249),M=a(248),C=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.signup(e,function(){a.props.history.push("/")})},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 offset-1 mt-4"},r.a.createElement("form",{onSubmit:e(this.onSubmit)},r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement(R.a,{name:"name",type:"text",placeholder:"What's your handle?",component:"input",autoComplete:"none",className:"form-control"})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement(R.a,{name:"email",type:"text",placeholder:"rick@councilofricks.singularity",component:"input",autoComplete:"none",className:"form-control"})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement(R.a,{name:"password",type:"password",placeholder:"Anything but 'password'...",component:"input",autoComplete:"none",className:"form-control"})),r.a.createElement("div",null,this.props.errorMessage),r.a.createElement("button",{className:"btn btn-lg btn-outline-success"},"Sign Up!")))))}}]),t}(n.Component);var G=Object(s.d)(Object(l.b)(function(e){return{errorMessage:e.auth.errorMessage}},m),Object(M.a)({form:"signup"}))(C),I=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.signin(e,function(){a.props.history.push("/")})},a}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 offset-1 mt-4"},r.a.createElement("form",{onSubmit:e(this.onSubmit)},r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement(R.a,{name:"email",placeholder:"root@eruditorum.org",type:"text",component:"input",autoComplete:"none",className:"form-control"})),r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement(R.a,{name:"password",type:"password",component:"input",autoComplete:"none",className:"form-control"})),r.a.createElement("div",null,this.props.errorMessage),r.a.createElement("button",{className:"btn btn-lg btn-outline-primary"},"Sign In!")))))}}]),t}(n.Component);var U=Object(s.d)(Object(l.b)(function(e){return{errorMessage:e.auth.errorMessage}},m),Object(M.a)({form:"signin"}))(I),A=function(e){function t(e){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).call(this,e))}return Object(w.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null),r.a.createElement("div",{className:"container main-app"},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:k}),r.a.createElement(c.b,{exact:!0,path:"/signin",component:U}),r.a.createElement(c.b,{exact:!0,path:"/signup",component:G}),r.a.createElement(c.a,{to:"/signin"}))))}}]),t}(n.Component);var P=Object(l.b)(function(e){return{auth:e.auth}},null)(A),F=(a(244),a(245),a(246),Object(s.e)(b,{},Object(s.a)(u.a)));Object(i.render)(r.a.createElement(l.a,{store:F},r.a.createElement(o.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/",component:P})))),document.getElementById("root"))},6:function(e,t,a){"use strict";var n=a(113);window.THREE=n,a(201),a(202),a(203),a(71),t.a=window.THREE},7:function(e,t,a){"use strict";a.r(t),a.d(t,"SAVE_DRAWING",function(){return o}),a.d(t,"GET_FILE",function(){return c}),a.d(t,"RENDER_DRAWING",function(){return i}),a.d(t,"AUTH_USER",function(){return l}),a.d(t,"AUTH_ERROR",function(){return s}),a.d(t,"signup",function(){return u}),a.d(t,"signin",function(){return m}),a.d(t,"signout",function(){return d}),a.d(t,"updateDrawing",function(){return p}),a.d(t,"getFile",function(){return f}),a.d(t,"renderDrawing",function(){return b});var n=a(37),r=a.n(n),o="SAVE_DRAWING",c="GET_FILE",i="RENDER_DRAWING",l="AUTH_USER",s="AUTH_ERROR",u=function(e,t){return function(a){r.a.post("auth/signup",e).then(function(e){a({type:l,payload:e.data}),localStorage.setItem("token",e.data.token),localStorage.setItem("email",e.data.email),t()}).catch(function(e){a({type:s,payload:"Email in use"})})}},m=function(e,t){return function(a){r.a.post("auth/signin",e).then(function(e){a({type:l,payload:e.data}),localStorage.setItem("token",e.data.token),localStorage.setItem("email",e.data.email),t()}).catch(function(e){a({type:s,payload:"Email in use"})})}},d=function(){return localStorage.removeItem("token"),localStorage.removeItem("email"),{type:l,payload:""}},p=function(e,t){return function(a){r.a.post("public/".concat(e),{data:t}).then(function(e){a({type:o,payload:e.data})}).catch(function(e){console.log(e)})}},f=function(e){return function(t){r.a.get("download/".concat(e)).then(function(e){console.log(e),window.open(e.file),t({type:c,payload:e})}).catch(function(e){console.log(e)})}},b=function(e){return function(t){var a="".concat("http://localhost:8000/","?"),n="",o=e.fileString,c=e.extrude;o&&(n+="file=".concat(o,"&")),c&&(n+="extrude=".concat(c,"&")),n.length>0&&(a+=n),r.a.get(a).then(function(e){console.log(e),t({type:i,payload:e.data})}).catch(function(e){console.log(e)})}}}},[[115,1,2]]]);
//# sourceMappingURL=main.10b3131f.chunk.js.map