{"version":3,"sources":["actions/index.js","reducers/authReducer.js","reducers/index.js","reducers/canvasReducer.js","reducers/shapeReducer.js","reducers/designReducer.js","components/Navbar.js","three.js","components/LoadingModal.js","components/Shape.js","components/Canvas.js","components/GuestHelperModal.js","components/LandingPage.js","components/Signup.js","components/Signin.js","components/DesignCard.js","components/DesignGrid.js","components/UserHome.js","components/DesignDetailView.js","components/PublicDesigns.js","components/App.js","index.js"],"names":["SAVE_DESIGN","GET_FILE","RENDER_DESIGN","AUTH_USER","AUTH_ERROR","GET_DESIGN","GET_DESIGNS","PUBLIC_DESIGNS","SLICE_DESIGN","signup","formProps","callback","dispatch","axios","post","then","response","type","payload","data","localStorage","setItem","token","email","name","id","catch","error","signin","signout","removeItem","updateDesign","fileName","svgString","userId","getItem","concat","console","log","downloadFile","get","getUserDesigns","getPublicDesigns","public","getDesign","designId","saveDesign","designName","createGcode","alert","INITIAL_STATE","authenticated","errorMessage","rootReducer","combineReducers","auth","state","arguments","length","undefined","action","Object","objectSpread","form","formReducer","timeStamp","Date","currentModel","designs","connect","actions","_ref","handleSignOutClick","react_default","a","createElement","className","href","src","width","height","alt","Fragment","react_router_dom","to","onClick","window","THREE","require","LoadingModal","scene","Scene","background","Color","threeWidth","threeHeight","helper","GridHelper","rotation","x","Math","PI","add","innerWidth","innerHeight","camera","PerspectiveCamera","position","set","renderer","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","OrbitControls","domElement","screenSpacePanning","group","loader","SVGLoader","exporter","STLExporter","link","document","style","display","body","appendChild","animate","requestAnimationFrame","render","onWindowResize","aspect","updateProjectionMatrix","clearThree","obj","num","children","remove","geometry","dispose","material","forEach","texture","scaleGroup","meshGroup","scalar","scale","multiplyScalar","y","saveArrayBuffer","buffer","filename","save","Blob","blob","URL","createObjectURL","download","click","arrayToPoints","array","removeZeroArray","filter","point","newArray","i","myPoint","Vector2","push","createBasicMaterial","color","opacity","transparent","MeshBasicMaterial","setStyle","side","DoubleSide","depthWrite","loadSVG","svgUrl","extrude","load","paths","Group","extrudeSettings","depth","steps","bevelEnabled","bevelThickness","bevelSize","bevelSegments","scalarSettings","includes","updateMatrixWorld","setInitialScale","path","fillColor","userData","fill","fillOpacity","shapes","toShapes","j","shape","fillGeometry","ExtrudeBufferGeometry","fillMesh","Mesh","ShapeBufferGeometry","mesh","strokeColor","stroke","strokeMaterial","strokeOpacity","k","kl","subPaths","strokeGeometry","strokeMesh","threeDGeometry","subPath","pointsToStroke","getPoints","wirePoints","attributes","p","newGeometry","Shape","baseMaterial","materialArray","boxShape","BoxHelper","groupCenterX","boundingSphere","center","groupCenterY","baseShape","baseRadius","radius","baseGeometry","CylinderBufferGeometry","abs","baseHeight","createStampBase","xhr","lengthComputable","percentComplete","loaded","total","round","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","saveSVG","currentUserId","publicUrl","update","myUrl","setState","circle","isLoading","bind","assertThisInitialized","renderDownloadButton","handleSaveDesign","mount","currentUrl","addEventListener","extrudeBoolean","_this2","e","preventDefault","grabModelName","split","thingName","result","parse","binary","exportBinary","isLoggedInBoolean","dotPosition","indexOf","slice","_this3","ToggleButtonGroup_default","value","onChange","ToggleButton_default","variant","ref","Component","ownProps","url","bindActionCreators","Canvas","createRandomNumber","floor","random","createFileName","clear","sigPad","renderDrawing","svgDataURL","toDataURL","mySVG","atob","fileNumber","build_default","penColor","backgroundColor","canvasProps","minwidth","maxwidth","mindistance","throttle","GuestHelperModal","Modal_default","assign","size","aria-labelledby","centered","Header","closeButton","Title","Body","Footer","Button_default","onHide","modalOnLanding","_React$useState","React","useState","_React$useState2","slicedToArray","modalShow","setModalShow","greetings","guestGreeting","renderGreeting","components_GuestHelperModal","show","components_Shape","components_Canvas","Signup","onSubmit","history","handleSubmit","Field","placeholder","component","autoComplete","compose","reduxForm","Signin","date","design","_id","svgLink","h","s","randomHSLA","created_at","toLocaleDateString","DesignGrid","renderDesigns","designArray","map","components_DesignCard","key","UserHome","displayDesigns","components_DesignGrid","DesignDetailView","currentModelId","likes","match","params","PublicDesigns","App","components_Navbar","react_router","exact","LandingPage","store","createStore","applyMiddleware","thunk","es","getElementById"],"mappings":"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","file":"static/js/main.ce5789ff.chunk.js","sourcesContent":["import axios from \"axios\";\r\nexport const SAVE_DESIGN = 'SAVE_DESIGN';\r\nexport const GET_FILE = 'GET_FILE';\r\nexport const RENDER_DESIGN = 'RENDER_DESIGN';\r\nexport const AUTH_USER = 'AUTH_USER';\r\nexport const AUTH_ERROR = 'AUTH_ERROR';\r\nexport const GET_DESIGN = 'GET_DESIGN';\r\nexport const GET_DESIGNS = 'GET_DESIGNS';\r\nexport const PUBLIC_DESIGNS = 'PUBLIC_DESIGNS';\r\nexport const SLICE_DESIGN = 'SLICE_DESIGN';\r\n\r\nexport const signup = (formProps, callback) => dispatch => {\r\n  axios.post(\r\n    'auth/signup',\r\n    formProps\r\n  ).then(function (response) {\r\n    dispatch({ type: AUTH_USER, payload: response.data });\r\n    localStorage.setItem('token', response.data.token);\r\n    localStorage.setItem('email', response.data.email);\r\n    localStorage.setItem('name', response.data.name);\r\n    localStorage.setItem('id', response.data.id);\r\n    callback();\r\n  })\r\n    .catch(function (error) {\r\n      dispatch({ type: AUTH_ERROR, payload: 'Confirmation email sent, please check your inbox.' });\r\n    });\r\n};\r\n\r\nexport const signin = (formProps, callback) => dispatch => {\r\n  axios.post(\r\n    'auth/signin',\r\n    formProps\r\n  ).then(function (response) {\r\n    dispatch({ type: AUTH_USER, payload: response.data });\r\n    localStorage.setItem('token', response.data.token);\r\n    localStorage.setItem('email', response.data.email);\r\n    localStorage.setItem('name', response.data.name);\r\n    localStorage.setItem('id', response.data.id);\r\n    callback();\r\n  })\r\n    .catch(function (error) {\r\n      dispatch({ type: AUTH_ERROR, payload: 'Email in use' });\r\n    });\r\n};\r\n\r\nexport const signout = () => {\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('email');\r\n  localStorage.removeItem('name');\r\n  localStorage.removeItem('id');\r\n  return {\r\n    type: AUTH_USER,\r\n    payload: ''\r\n  };\r\n};\r\n\r\nexport const updateDesign = (fileName, svgString) => dispatch => {\r\n  \r\n  let userId = localStorage.getItem('id');\r\n  if(!userId){userId = 'guest'};\r\n  \r\n\r\n  axios.post(`/designs/${userId}/${fileName}`,{\r\n    data: svgString,\r\n  }).then(function (response) {\r\n    // console.log(response);\r\n    dispatch({ type: SAVE_DESIGN, payload: response.data });\r\n  })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n};\r\n\r\nexport const downloadFile = (fileName) => dispatch => {\r\n  let userId = localStorage.getItem('id');\r\n  if (userId === '') { userId = 'guest' };\r\n\r\n  axios.get(`/download/${userId}/${fileName}`)\r\n    .then(function(response){\r\n      \r\n      dispatch({ type: GET_FILE, payload: response })\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\nexport const getUserDesigns = (userId) => dispatch => {\r\n\r\n  axios.get(`/users/${userId}/`)\r\n  .then(function (response) {\r\n    // console.log(response);\r\n    dispatch({ type: GET_DESIGNS, payload: response.data });\r\n  })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n};\r\n\r\nexport const getPublicDesigns = () => dispatch => {\r\n\r\n  axios.get(`/designs/`, {\r\n    public: true\r\n  })\r\n    .then(function (response) {\r\n      // console.log(response);\r\n      dispatch({ type: PUBLIC_DESIGNS, payload: response.data });\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n};\r\n\r\nexport const getDesign = (designId) => dispatch => {\r\n  // console.log(svgString);\r\n\r\n  axios.get(`/designs/${designId}`)\r\n    .then(function (response) {\r\n      \r\n      dispatch({ type: GET_DESIGN, payload: response.data });\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n};\r\n\r\nexport const saveDesign = (userId, designName) => dispatch => {\r\n  // console.log(svgString);\r\n\r\n  axios.get(`/designs/${userId}/${designName}/save`)\r\n  .then(function (response) {\r\n    // console.log(response);\r\n    dispatch({ type: SAVE_DESIGN, payload: response.data });\r\n  })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n};\r\n\r\nexport const createGcode = (designName) => dispatch => {\r\n  \r\n  let userId = localStorage.getItem('id');\r\n  if (userId === '') { userId = 'guest' };\r\n  axios.get(`/designs/${userId}/${designName}/gcode`)\r\n    .then(function (response) {\r\n      // console.log(response);\r\n      // dispatch({ type: SLICE_DESIGN, payload: response.data });\r\n      alert(response.data);\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n};\r\n","import { AUTH_USER, AUTH_ERROR } from '../actions';\r\n\r\nconst INITIAL_STATE = {\r\n  authenticated: localStorage.getItem('token') || '',\r\n  email: localStorage.getItem('email') || '',\r\n  name: localStorage.getItem('name') || '',\r\n  id: localStorage.getItem('id') || '',\r\n  errorMessage: ''\r\n};\r\n\r\nexport default function (state = INITIAL_STATE, action) {\r\n  switch (action.type) {\r\n    case AUTH_USER:\r\n      return {\r\n        ...state, authenticated: action.payload.token,\r\n        email: action.payload.email, name: action.payload.name, id: action.payload.id\r\n      };\r\n    case AUTH_ERROR:\r\n      return { ...state, errorMessage: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}","import { combineReducers } from \"redux\";\r\nimport shapeReducer from \"./shapeReducer\";\r\nimport canvasReducer from './canvasReducer';\r\nimport authReducer from './authReducer';\r\nimport designReducer from './designReducer';\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  timeStamp: canvasReducer,\r\n  currentModel: shapeReducer,\r\n  designs: designReducer\r\n});\r\n\r\nexport default rootReducer;","import { SAVE_DESIGN, GET_FILE } from \"../actions\";\r\n\r\nexport default function (state = {}, action) {\r\n  switch (action.type) {\r\n    case SAVE_DESIGN:\r\n      // let newState = {\r\n      //   ...state,\r\n      //   filters: [...state.filters, action.filter]\r\n      // }\r\n      // cache.writeData('state', newState)\r\n      let newState = {timeStamp: new Date()}\r\n      return newState\r\n    case GET_FILE:\r\n      let someState = { timeStamp: new Date() }\r\n      return someState\r\n  default:\r\n    return state;\r\n  }\r\n}","import { SAVE_DESIGN, GET_DESIGN, AUTH_USER } from \"../actions\";\r\n\r\nexport default function (state = 'MDlogo-v0.svg', action) {\r\n  switch (action.type) {\r\n    case SAVE_DESIGN:     \r\n      return action.payload.fileName\r\n    case GET_DESIGN:\r\n      let designName = `${action.payload[0].designName}.svg`\r\n      return designName\r\n    case AUTH_USER:\r\n      return 'MDlogo-v0.svg'\r\n  default:\r\n    return state;\r\n  }\r\n}","import { GET_DESIGN, GET_DESIGNS, PUBLIC_DESIGNS } from '../actions';\r\n\r\nexport default function (state = [], action) {\r\n  if (action.error) {\r\n    return (action.error);\r\n  }\r\n  switch (action.type) {\r\n    case GET_DESIGNS:\r\n      // console.log(action.payload)\r\n      return action.payload\r\n    case PUBLIC_DESIGNS:\r\n      return action.payload\r\n    case GET_DESIGN:\r\n      return action.payload\r\n    default:\r\n      return state;\r\n  }\r\n}","import React from \"react\";\r\nimport { NavLink, Link } from \"react-router-dom\";\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../actions';\r\n\r\nconst Navbar = ({ authenticated, email, name, signout }) => {\r\n  \r\n  const handleSignOutClick = () => {\r\n    signout();\r\n  };\r\n\r\n  const renderLinks = () => {\r\n    if (authenticated) {\r\n      return (\r\n        <>\r\n          <li className='nav-item mx-2'><Link to=\"/public\" className='btn btn-md btn-light'>Published Designs</Link></li>\r\n          <li className='nav-item mx-2'><Link to=\"/home\" className='btn btn-md btn-secondary'>{name}'s Designs</Link></li>\r\n          <li className='nav-item mx-2'>\r\n            <button\r\n              onClick={handleSignOutClick}\r\n              className='btn btn-md btn-info'\r\n            >\r\n              Sign Out\r\n            </button>\r\n          </li>\r\n        </>\r\n      );\r\n    } else {\r\n      return (\r\n        <>\r\n          \r\n          <li className='nav-item mx-2'><Link to=\"/signup\" className='btn btn-sm btn-primary'>Sign Up</Link></li>\r\n          <li className='nav-item mx-2'><Link to=\"/signin\" className='btn btn-sm btn-success'>Sign In</Link></li>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n\r\n    <nav className=\"navbar fixed-top navbar-dark bg-dark align-middle text-align-middle\">\r\n      <a className=\"navbar-brand\" href='/'>\r\n        <img src={ process.env.PUBLIC_URL + '/MindDesignv1.png'} width=\"auto\" height=\"30\" className='d-inline-block align-top' alt='Mind Design'/>\r\n      </a>\r\n      {/* <form class=\"form-inline\">\r\n            <input class=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Search Designs\" aria-label=\"Search\" ></input>\r\n            <button class=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\">Search</button>\r\n          </form> */}\r\n      <div className=\"\">\r\n        <ul className=\"navbar-nav mr-2\">\r\n          {renderLinks()}\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    authenticated: state.auth.authenticated,\r\n    email: state.auth.email,\r\n    name: state.auth.name\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, actions)(Navbar);\r\n","import * as THREE from 'three';\r\n\r\nwindow.THREE = THREE; // THREE.NRRDLoader expects THREE to be a global object\r\nrequire('three/examples/js/loaders/SVGLoader');\r\nrequire('three/examples/js/controls/OrbitControls');\r\nrequire('three/examples/js/exporters/STLExporter.js');\r\nrequire('three/examples/js/libs/dat.gui.min.js');\r\n\r\nexport default window.THREE;","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nfunction LoadingModal(props) {\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      size=\"md\"\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n    >\r\n      <Modal.Body id=\"contained-modal-title-vcenter\">\r\n        <Spinner\r\n          as=\"span\"\r\n          animation=\"border\"\r\n          size=\"lg\"\r\n          role=\"status\"\r\n          aria-hidden=\"true\"\r\n        /> Loading, one moment please -<br></br>our trusty gnomes are extruding your design...\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button >Close</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default LoadingModal;","import React, { Component } from 'react';\r\nimport { downloadFile, saveDesign, createGcode } from '../actions';\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport THREE from \"../three\";\r\nimport { GUI } from 'three/examples/js/libs/dat.gui.min.js';\r\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\r\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ToggleButton from 'react-bootstrap/ToggleButton';\r\nimport LoadingModal from './LoadingModal';\r\nimport cmd from 'node-cmd';\r\n\r\n// === THREE.JS CODE START ===\r\nvar scene = new THREE.Scene();\r\nscene.background = new THREE.Color(0xe0e0e0);\r\n\r\nvar helper = new THREE.GridHelper(160, 10);\r\nhelper.rotation.x = Math.PI / 2;\r\nscene.add(helper);\r\n// console.log(window);\r\n// var camera = new THREE.PerspectiveCamera(75, ((window.innerWidth * 0.5) - (window.innerWidth * 0.1)) / ((window.innerHeight * 0.5)), 0.1, 1000);\r\nvar threeWidth, threeHeight;\r\nif (window.innerWidth <= 768) {\r\n  threeWidth = ((window.innerWidth * 0.8));\r\n  threeHeight = ((window.innerHeight * 0.5));\r\n} else {\r\n  threeWidth = ((window.innerWidth * 0.37));\r\n  threeHeight = ((window.innerHeight * 0.5));\r\n}\r\nvar camera = new THREE.PerspectiveCamera(50, threeWidth / threeHeight, 1, 1000);\r\ncamera.position.set(0, 0, 200);\r\nvar renderer = new THREE.WebGLRenderer({ antialias: true });\r\nrenderer.setPixelRatio(window.devicePixelRatio);\r\nrenderer.setSize(threeWidth, threeHeight);\r\n//add in pan/view options\r\nvar controls = new THREE.OrbitControls(camera, renderer.domElement);\r\ncontrols.screenSpacePanning = true;\r\n\r\n// instantiate a loader, exporter, and group\r\nvar loader = new THREE.SVGLoader();\r\nvar exporter = new THREE.STLExporter();\r\nvar group;\r\n\r\n//append a link, from our Three.js examples\r\nvar link = document.createElement('a');\r\nlink.style.display = 'none';\r\ndocument.body.appendChild(link);\r\n\r\n// console.log(loader);\r\nvar animate = function () {\r\n  requestAnimationFrame(animate);\r\n  renderer.render(scene, camera);\r\n};\r\n\r\nvar onWindowResize = function () {\r\n\r\n  if (window.innerWidth <= 768) {\r\n    threeWidth = ((window.innerWidth * 0.8));\r\n    threeHeight = ((window.innerHeight * 0.5));\r\n  } else {\r\n    threeWidth = ((window.innerWidth * 0.37));\r\n    threeHeight = ((window.innerHeight * 0.5));\r\n  }\r\n\r\n  camera.aspect = threeWidth / threeHeight;\r\n  camera.updateProjectionMatrix();\r\n  renderer.setSize(threeWidth, threeHeight);\r\n}\r\n\r\nvar clearThree = function (obj, num = 1) {\r\n  while (obj.children.length > num) {\r\n    clearThree(obj.children[(obj.children.length - 1)])\r\n    obj.remove(obj.children[(obj.children.length - 1)]);\r\n  }\r\n  if (obj.geometry) obj.geometry.dispose()\r\n  // console.log(obj.material)\r\n\r\n  if (obj.material !== undefined){\r\n    if (obj.material.length !== undefined) {\r\n      obj.material.forEach(material => {\r\n        material.dispose();\r\n      });\r\n    } else {\r\n      obj.material.dispose();\r\n    }\r\n  }\r\n  if (obj.texture) obj.texture.dispose()\r\n} \r\n\r\nvar scaleGroup = function(meshGroup, scalar){\r\n  meshGroup.scale.multiplyScalar(scalar);\r\n  //three.js faces \"away\" from our perspective, so update\r\n  meshGroup.scale.y *= - 1;\r\n}\r\n\r\nvar exportASCII = function(meshGroup) {\r\n  var result = exporter.parse(meshGroup);\r\n  // let objectExtension = objectName + '.stl'\r\n  saveString(result, 'thing.stl');\r\n}\r\nvar exportBinary = function (meshGroup, thingName) {\r\n  \r\n  scaleGroup(meshGroup, 0.20);\r\n  meshGroup.updateMatrixWorld(true);\r\n  var result = exporter.parse(meshGroup, { binary: true });\r\n  saveArrayBuffer(result, `${thingName}.stl`);\r\n  clearThree(scene, 2);\r\n  // scaleGroup(meshGroup, 6.1);\r\n  // meshGroup.updateMatrixWorld(true);\r\n}\r\n\r\nvar saveString = function(text, filename) {\r\n  save(new Blob([text], { type: 'text/plain' }), filename);\r\n}\r\nvar saveArrayBuffer = function(buffer, filename) {\r\n  save(new Blob([buffer], { type: 'application/octet-stream' }), filename);\r\n}\r\n\r\nvar save = function (blob, filename) {\r\n  link.href = URL.createObjectURL(blob);\r\n  link.download = filename;\r\n  link.click();\r\n}\r\n\r\n\r\n\r\nconst arrayToPoints = function(array){\r\n  let removeZeroArray = array.filter(point => { return point !== 0 });  \r\n  let newArray = [];\r\n  for(var i = 0; i < removeZeroArray.length; i+=2){\r\n    let myPoint = new THREE.Vector2(removeZeroArray[i], removeZeroArray[i+1]);\r\n    newArray.push(myPoint);\r\n  }\r\n  return newArray;\r\n}\r\n\r\nconst setInitialScale = (svgUrl) => {\r\n  var scalarSettings;\r\n\r\n  //select between true/false for extrude and check for remote sig file (v1 of app)\r\n  //v2 of app will take in remote url and not be concerned with naming\r\n  if (!svgUrl.includes('tiger')) {\r\n    scalarSettings = 0.6;\r\n    group.position.x = -85;\r\n    group.position.y = 85;\r\n  }\r\n  else {\r\n    scalarSettings = 0.25;\r\n    group.position.x = -70;\r\n    group.position.y = 70;\r\n  }\r\n\r\n  //update our overall group with determined settings\r\n  scaleGroup(group, scalarSettings);\r\n  // group.scale.y *= - 1;\r\n  //forces our transformations\r\n  group.updateMatrixWorld(true);\r\n}\r\n\r\nconst createStampBase = (extrude, shape, group, materialArray, svgUrl) => {\r\n  \r\n  var boxShape = new THREE.BoxHelper(group, 0xffff00);\r\n  let groupCenterX = boxShape.geometry.boundingSphere.center.x;\r\n  let groupCenterY = boxShape.geometry.boundingSphere.center.y;\r\n  \r\n  if(extrude && !svgUrl.includes('tiger')){\r\n    var baseShape;\r\n    if (shape === 'circle') {\r\n      var baseRadius = (1 / group.scale.x) * boxShape.geometry.boundingSphere.radius;\r\n      var baseHeight = 2;\r\n      var baseGeometry = new THREE.CylinderBufferGeometry(baseRadius, baseRadius, baseHeight, 64);\r\n      baseShape = new THREE.Mesh(baseGeometry, materialArray);\r\n      baseShape.position.set((1 / group.scale.x) * (Math.abs(group.position.x) + groupCenterX), -(1 / group.scale.y) * (Math.abs(group.position.y) - groupCenterY), baseHeight / 2);\r\n      baseShape.rotation.set(Math.PI / 2, 0, 0);\r\n      \r\n    } else if (shape === 'square'){\r\n      baseShape = new THREE.BoxHelper(group, 0xffff00);\r\n      \r\n    }\r\n\r\n    group.add(baseShape);\r\n    scene.updateMatrixWorld(true);\r\n  }\r\n}\r\n\r\nconst createBasicMaterial = (color, opacity, transparent) => {\r\n  let myMaterial = new THREE.MeshBasicMaterial({\r\n    color: new THREE.Color().setStyle(color),\r\n    opacity: opacity,\r\n    transparent: transparent,\r\n    side: THREE.DoubleSide,\r\n    depthWrite: false\r\n    // wireFrame: false\r\n\r\n  });\r\n\r\n  return myMaterial;\r\n}\r\n\r\nvar loadSVG = function (svgUrl, extrude){\r\n  // load a SVG resource\r\n  loader.load(\r\n    // resource URL\r\n    svgUrl,\r\n    // called when the resource is loaded\r\n    function (data) {\r\n\r\n      const paths = data.paths;\r\n      group = new THREE.Group();\r\n      \r\n      const extrudeSettings = {\r\n        depth: 10,\r\n        steps: 1,\r\n        bevelEnabled: false,\r\n        bevelThickness: 2,\r\n        bevelSize: 4,\r\n        bevelSegments: 1\r\n      };\r\n\r\n      setInitialScale(svgUrl);\r\n\r\n      for (let i = 0; i < paths.length; i++) {\r\n        //let's add our printing base here!\r\n        \r\n        const path = paths[i];\r\n        const fillColor = path.userData.style.fill;\r\n\r\n        if (fillColor !== undefined && fillColor !== 'none') {\r\n          const material = createBasicMaterial(fillColor, path.userData.style.fillOpacity, path.userData.style.fillOpacity < 1);\r\n\r\n          const shapes = path.toShapes(true);\r\n          for (let j = 0; j < shapes.length; j++) {\r\n            const shape = shapes[j];\r\n            \r\n            if (extrude) {\r\n              const fillGeometry = new THREE.ExtrudeBufferGeometry(shape, extrudeSettings);\r\n              const fillMesh = new THREE.Mesh(fillGeometry, material);\r\n              group.add(fillMesh);\r\n                               \r\n            } else {\r\n              const geometry = new THREE.ShapeBufferGeometry(shape);\r\n              const mesh = new THREE.Mesh(geometry, material);\r\n              group.add(mesh);\r\n            }\r\n            \r\n          }\r\n        }\r\n\r\n        const strokeColor = path.userData.style.stroke;\r\n        if (strokeColor !== undefined && strokeColor !== 'none') {\r\n          var strokeMaterial = createBasicMaterial(strokeColor, path.userData.style.strokeOpacity, path.userData.style.strokeOpacity < 1);\r\n\r\n          for (let k = 0, kl = path.subPaths.length; k < kl; k++) {\r\n            const subPath = path.subPaths[k];\r\n            var strokeGeometry, strokeMesh, threeDGeometry;\r\n\r\n            if (extrude && !svgUrl.includes('tiger')) {\r\n              if (k < path.subPaths.length) {\r\n                strokeGeometry = new THREE.SVGLoader.pointsToStroke(subPath.getPoints(), path.userData.style);\r\n                let wirePoints = arrayToPoints(strokeGeometry.attributes.position.array);\r\n                for (let p = 0; p < wirePoints.length; p += 3) {\r\n                  const newGeometry = new THREE.Shape([wirePoints[p], wirePoints[p + 1], wirePoints[p + 2]]);\r\n                  if (newGeometry) {\r\n                    threeDGeometry = new THREE.ExtrudeBufferGeometry(newGeometry, extrudeSettings);\r\n                    strokeMesh = new THREE.Mesh(threeDGeometry, strokeMaterial);\r\n                    group.add(strokeMesh);\r\n                  }\r\n                }\r\n              }\r\n            } \r\n            else {\r\n              if (k < path.subPaths.length ){\r\n                strokeGeometry = new THREE.SVGLoader.pointsToStroke(subPath.getPoints(), path.userData.style);\r\n                if (strokeGeometry) {\r\n                  strokeMesh = new THREE.Mesh(strokeGeometry, strokeMaterial);\r\n                  group.add(strokeMesh);\r\n                }\r\n              }\r\n            } \r\n          }\r\n\r\n          scene.add(group);\r\n        }\r\n      }\r\n\r\n      //place cylinder material here\r\n      var baseMaterial = createBasicMaterial(0x00ffff, 0.3, true);\r\n      //add our base helper with array of materials\r\n      createStampBase(extrude, 'circle', group, [strokeMaterial, baseMaterial], svgUrl)\r\n      // createStampBase(extrude, 'square', group, [strokeMaterial, baseMaterial], svgUrl)\r\n    },\r\n    // called when loading is in progresses\r\n    function (xhr) {\r\n      // console.log((xhr.loaded / xhr.total * 100) + '% loaded');\r\n      if (xhr.lengthComputable) {\r\n        var percentComplete = xhr.loaded / xhr.total * 100;\r\n        console.log(Math.round(percentComplete, 2) + '% rendered');\r\n      }\r\n\r\n    },\r\n    // called when loading has errors\r\n    function (error) {\r\n\r\n      console.log('An error happened');\r\n\r\n    }\r\n  );\r\n}\r\n\r\n\r\nclass Shape extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      circle: true,\r\n      extrude: false,\r\n      isLoading: false\r\n    }\r\n\r\n    this.saveSVG = this.saveSVG.bind(this);\r\n    this.renderDownloadButton = this.renderDownloadButton.bind(this)\r\n    this.handleSaveDesign = this.handleSaveDesign.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    // use ref as a mount point of the Three.js scene instead of the document.body\r\n    this.mount.appendChild(renderer.domElement);\r\n    clearThree(scene);\r\n\r\n    // load a SVG resource\r\n    if (this.props.currentUrl){\r\n      clearThree(scene);\r\n      let myUrl = `https://minddesign-assets.s3.amazonaws.com/${this.props.auth.id}/designs/${this.props.currentModel}`;\r\n      loadSVG(myUrl, false);\r\n    } else {\r\n      loadSVG('https://minddesign-assets.s3.amazonaws.com/MDlogo-v0.svg', false);\r\n    }\r\n    \r\n    window.addEventListener('resize', onWindowResize, false);\r\n    animate();\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    clearThree(scene);\r\n  }\r\n\r\n  componentDidUpdate(){\r\n    let currentUserId = this.props.auth.id === '' || this.props.auth.id === undefined ? 'guest' : this.props.auth.id;\r\n    let publicUrl = `https://minddesign-assets.s3.amazonaws.com/${currentUserId}/designs/${this.props.currentModel}`;\r\n    clearThree(scene);\r\n    loadSVG(publicUrl, this.state.extrude);\r\n    // this.setState({isLoading: false});   \r\n    animate();\r\n  }\r\n\r\n  renderDownloadButton(extrudeBoolean){\r\n    return extrudeBoolean ?\r\n      <button\r\n        className='btn btn-block btn-primary mb-2'\r\n        onClick={e => {\r\n          e.preventDefault();\r\n          let grabModelName = this.props.currentModel.split('.');\r\n          // alert('Feature not live yet! \\n Check back in on Demo Night.');\r\n          exportBinary(group, grabModelName[0]);\r\n        }}\r\n      >\r\n        Download As 3D Mini-Stamp\r\n                </button>\r\n      :\r\n      <button\r\n        className='btn btn-block btn-primary mb-2'\r\n        onClick={e => {\r\n          e.preventDefault();\r\n          this.saveSVG();\r\n        }}\r\n      >\r\n        Download As Picture\r\n                </button>\r\n  }\r\n\r\n  handleSaveDesign(isLoggedInBoolean){\r\n    if(isLoggedInBoolean){\r\n      let dotPosition = this.props.currentModel.indexOf('.');\r\n      let designName = this.props.currentModel.slice(0,dotPosition);\r\n      this.props.saveDesign(this.props.auth.id, designName);\r\n      alert(`Designed saved! Check it out under ${this.props.auth.name}'s Designs`);\r\n    } else {\r\n      // alert('Feature not live yet! \\n Check back in on Demo Night.')\r\n      alert('You\\'ll to need to be Signed In to save! \\nPlease use the links in the navigation above.')\r\n    }\r\n  }\r\n\r\n  saveSVG = () => {\r\n    let currentUserId = this.props.auth.id === '' ? 'guest' : this.props.auth.id;\r\n    let publicUrl = `https://minddesign-assets.s3.amazonaws.com/${currentUserId}/designs/${this.props.currentModel}`;\r\n    link.href = publicUrl;\r\n    link.download = this.props.currentModel;\r\n    link.click();\r\n  } \r\n\r\n\r\n  update = () => {\r\n    // let loadingSpinner = <i className=\"fas fa-spinner fa-pulse\"></i>;\r\n    // this.mount.prepend(loadingSpinner)\r\n    clearThree(scene);\r\n    let currentUserId = this.props.auth.id === '' ? 'guest' : this.props.auth.id;\r\n    let myUrl = `https://minddesign-assets.s3.amazonaws.com/${currentUserId}/designs/${this.props.currentModel}`;\r\n    this.setState({ extrude: !this.state.extrude}, () => {\r\n      alert(`Loading, one moment please - our trusty gnomes are ${this.state.extrude ? 'Extrud' : 'Flatten' }ing your design...`)\r\n      loadSVG(myUrl, this.state.extrude);\r\n      // this.setState({ isLoading: !this.state.isLoading })\r\n    })\r\n    // loadingSpinner.destroy();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='container text-center'>\r\n        <div className='row'>\r\n          <div className='col-12'>\r\n            <div className='row mb-2'>\r\n              <div className='col-6'>\r\n                {this.renderDownloadButton(this.state.extrude)}\r\n              </div>\r\n              { this.props.currentUrl ? \r\n              <div></div> :\r\n              <div className='col-6'>\r\n                <button\r\n                  className='btn btn-block btn-success'\r\n                  onClick={e => {\r\n                    e.preventDefault();\r\n                    // alert('Feature not live yet! \\n Check back in on Demo Night.')\r\n                    this.handleSaveDesign(this.props.auth.authenticated)\r\n                  }}\r\n                >\r\n                  Save My Design\r\n                </button>\r\n              </div>}\r\n            </div>\r\n            <div className='row mb-2 border border-dark rounded-lg py-1'>\r\n              <div className='col-12'>\r\n                <h6 className='d-inline float-left align-center'>Controls:</h6>\r\n                <ToggleButtonGroup type=\"checkbox\" value={this.state.extrude} \r\n                  onChange={this.update}\r\n                >\r\n                  <ToggleButton value={1} variant=\"info\">{this.state.extrude ? 'Flatten' : 'Make 3D' }</ToggleButton>\r\n                </ToggleButtonGroup>\r\n                  {this.props.auth.authenticated && this.state.extrude ?\r\n                  <button\r\n                    className='btn btn-md btn-secondary ml-3'\r\n                    onClick={e => {\r\n                      e.preventDefault();\r\n                      let grabModelName = this.props.currentModel.split('.');\r\n                      this.props.createGcode(grabModelName[0])\r\n                    }}\r\n                  >\r\n                    Create GCode\r\n                  </button>\r\n                  : <div></div>}\r\n                \r\n              </div>\r\n            </div>\r\n           \r\n            <div ref={ref => (this.mount = ref)} />\r\n\r\n            <div className='row'>\r\n              <div className='col-12'>\r\n                <button\r\n                  className='btn btn-block btn-secondary'\r\n                  onClick={e => clearThree(scene)}\r\n                >\r\n                  Clear Canvas\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n  \r\n  return {\r\n    currentModel: state.currentModel,\r\n    timeStamp: state.timeStamp,\r\n    auth: state.auth,\r\n    currentUrl: ownProps.url\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({ downloadFile, saveDesign, createGcode }, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Shape);","import React, { Component } from 'react';\r\nimport { updateDesign } from '../actions';\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport SignatureCanvas from 'react-signature-canvas';\r\n\r\nclass Canvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { svgDataURL: null, fileNumber: null };\r\n    this.sigPad = {};\r\n    this.createRandomNumber = this.createRandomNumber.bind(this);\r\n    this.createFileName = this.createFileName.bind(this);\r\n  }\r\n\r\n  createRandomNumber = () => { return Math.floor(Math.random() * 100000000) }\r\n\r\n  createFileName = () => {\r\n    let currentFile;\r\n    if (this.props.auth.authenticated) {\r\n      currentFile = `${this.props.auth.name}-${this.createRandomNumber()}.svg`;\r\n    } else {\r\n      currentFile = `guest-${this.createRandomNumber()}.svg`\r\n    }\r\n\r\n    return currentFile;\r\n  }\r\n\r\n  componentDidMount(){\r\n\r\n    this.setState({fileName: this.createFileName()})\r\n  }\r\n\r\n  \r\n\r\n  clear = () => {\r\n    this.setState({ fileName: this.createFileName()}, () => {\r\n      this.sigPad.clear();\r\n    })\r\n  }\r\n\r\n  renderDrawing = () => {\r\n        \r\n    this.setState({\r\n      svgDataURL: this.sigPad.toDataURL('image/svg+xml')\r\n    }, () => {\r\n        let mySVG = this.state.svgDataURL.split(',');\r\n        this.props.updateDesign(this.state.fileName, atob(mySVG[1]));\r\n        // this.props.setFile(this.state.fileName);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='container text-center justify-content-center'>\r\n        <div className='row'>\r\n          <div className='col-12'>\r\n            <h3 className='text-center justify-content-center'>Start Sketching:</h3>\r\n          </div>\r\n        </div>\r\n        <div className='row'>\r\n          \r\n          <div className='col-12'>\r\n            <SignatureCanvas\r\n              ref={(ref) => { this.sigPad = ref }}\r\n              penColor='black'\r\n              backgroundColor='rgb(255,255,255)'\r\n              canvasProps={{\r\n                width: 300,\r\n                height: 300,\r\n                minwidth: 30,\r\n                maxwidth: 35,\r\n                mindistance: 10,\r\n                throttle: 0,\r\n                // dotsize: 20,\r\n                className: 'sigPad mt-4'\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n        {/* <div className='row'>\r\n          <div className='col-6'> */}\r\n            <button className='btn btn-secondary btn-lg mr-2' onClick={this.clear}>\r\n              Clear Pad\r\n            </button>\r\n          {/* </div>\r\n          <div className='col-6'> */}\r\n            <button className='btn btn-success btn-lg' onClick={this.renderDrawing}>\r\n              Draw To Canvas\r\n            </button>\r\n          \r\n        </div>  \r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    timeStamp: state.timeStamp\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({ updateDesign }, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nfunction GuestHelperModal(props) {\r\n  return (\r\n    <Modal\r\n      {...props}\r\n      size=\"lg\"\r\n      aria-labelledby=\"contained-modal-title-vcenter\"\r\n      centered\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Welcome to Mind Design!\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <h4>Getting Started</h4>\r\n        <ul>\r\n          <li>Use a stylus (or your favorite digit) to draw in the blank white box below.</li>\r\n          <li>Click 'Clear Pad' if that doesn't feel right. Click 'Draw To Canvas' if it does!</li>\r\n          <li>Your design will then appear in the grey canvas. From there...</li>\r\n          <li>Feel free to download as an SVG image file!</li>\r\n          <li>Or click 'Extrude' to see as a mini-stamp, you'll be able to download a 3D file of it.</li>\r\n        </ul>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button onClick={props.onHide}>Close</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default GuestHelperModal;","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport { } from '../actions';\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport Shape from './Shape';\r\nimport Canvas from './Canvas';\r\nimport GuestHelperModal from './GuestHelperModal'\r\n\r\nconst LandingPage = ({auth}) => {\r\n\r\n  const modalOnLanding = !auth.authenticated;\r\n\r\n  const [modalShow, setModalShow] = React.useState(modalOnLanding);\r\n\r\n  const guestGreeting = () => {\r\n    let greetings = [\r\n      'Let\\'s start Making!',\r\n      'Hand drawn, beyond hand made.',\r\n      'Hand-made for 2019.',\r\n      'Picture beyond pixels.'\r\n    ]\r\n    let randomGreeting = Math.floor(Math.random() * greetings.length);\r\n    return greetings[randomGreeting];\r\n  }\r\n\r\n  const renderGreeting = (auth) => {\r\n    return auth.authenticated ?\r\n        <h1 className=\"display-5\">Welcome back, {auth.name}</h1> :\r\n      <h1 className=\"display-5\">{guestGreeting()}</h1>\r\n    }\r\n    \r\n  return (\r\n    <>\r\n      <div className='row'>\r\n        <div className='col-md-12 text-center'>\r\n\r\n          <div className='jumbotron mt-2'>\r\n            {renderGreeting(auth)}\r\n          </div>\r\n          <GuestHelperModal\r\n            show={modalShow}\r\n            onHide={() => setModalShow(false)}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className='row'>\r\n        <div className='col-12 col-md-6 mb-4'>\r\n          <Shape />\r\n        </div>\r\n        <div className='col-12 col-md-6 canvas text-center mb-5'>\r\n          <Canvas />\r\n        </div>\r\n      </div>\r\n      <div className='row'>\r\n        <div className='col-md-8 offset-md-1'>\r\n          {/* let's place some extra content here */}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth\r\n    // categories: state.categories\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({}, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(LandingPage);","import React, { Component } from 'react';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../actions';\r\n\r\nclass Signup extends Component {\r\n  onSubmit = formProps => {\r\n    this.props.signup(formProps, () => {\r\n      this.props.history.push('/');\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { handleSubmit } = this.props;\r\n\r\n    return (\r\n      <>\r\n      <div className='row'>\r\n          <div className='col-10 offset-1 mt-4'>\r\n          <form onSubmit={handleSubmit(this.onSubmit)}>\r\n            <fieldset className='form-group'>\r\n              <label>Name</label>\r\n              <Field\r\n                name=\"name\"\r\n                type=\"text\"\r\n                placeholder=\"What's your handle?\"\r\n                component=\"input\"\r\n                autoComplete=\"none\"\r\n                className='form-control'\r\n              />\r\n            </fieldset>\r\n            <fieldset className='form-group'>\r\n              <label>Email</label>\r\n              <Field\r\n                name=\"email\"\r\n                type=\"text\"\r\n                placeholder=\"rick@councilofricks.singularity\"\r\n                component=\"input\"\r\n                autoComplete=\"none\"\r\n                className='form-control'\r\n              />\r\n            </fieldset>\r\n            <fieldset className='form-group'>\r\n              <label>Password</label>\r\n              <Field\r\n                name=\"password\"\r\n                type=\"password\"\r\n                placeholder=\"Anything but 'password'...\"\r\n                component=\"input\"\r\n                autoComplete=\"none\"\r\n                className='form-control'\r\n              />\r\n            </fieldset>\r\n            <div>{this.props.errorMessage}</div>\r\n            <button className='btn btn-lg btn-outline-success'>Sign Up!</button>\r\n          </form>\r\n          </div>\r\n      </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { errorMessage: state.auth.errorMessage };\r\n}\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, actions),\r\n  reduxForm({ form: 'signup' })\r\n)(Signup);\r\n","import React, { Component } from 'react';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../actions';\r\n\r\nclass Signin extends Component {\r\n  onSubmit = formProps => {\r\n    this.props.signin(formProps, () => {\r\n      this.props.history.push('/');\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { handleSubmit } = this.props;\r\n\r\n    return (\r\n      <div className='container'>\r\n        <div className='row'>\r\n           <div className='col-10 offset-1 mt-4'>\r\n            <form onSubmit={handleSubmit(this.onSubmit)}>\r\n              <fieldset className='form-group'>\r\n                <label>Email</label>\r\n                <Field\r\n                  name=\"email\"\r\n                  placeholder=\"root@eruditorum.org\"\r\n                  type=\"text\"\r\n                  component=\"input\"\r\n                  autoComplete=\"none\"\r\n                  className='form-control'\r\n                />\r\n              </fieldset>\r\n              <fieldset className='form-group'>\r\n                <label>Password</label>\r\n                <Field\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  component=\"input\"\r\n                  autoComplete=\"none\"\r\n                  className='form-control'\r\n                />\r\n              </fieldset>\r\n              <div>{this.props.errorMessage}</div>\r\n              <button className='btn btn-lg btn-outline-primary'>Sign In!</button>\r\n            </form>\r\n           </div>\r\n        </div>\r\n      </div>\r\n      \r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { errorMessage: state.auth.errorMessage };\r\n}\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, actions),\r\n  reduxForm({ form: 'signin' })\r\n)(Signin);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport {Link} from 'react-router-dom';\r\nimport { } from '../actions/index';\r\n\r\nconst DesignCard = ({ design }) => {\r\n\r\n  const randomHSLA = () => {\r\n    let h = Math.floor(Math.random() * 360);\r\n    let s = Math.floor(Math.random() * 100);\r\n    let l = 40;\r\n    let newColor = `hsla(${h},${s}%,${l}%,${0.7})`;\r\n    return (newColor);\r\n  }\r\n\r\n  const formatDate = (date) => {\r\n    let newDate = new Date(date);\r\n    return newDate.toLocaleDateString();\r\n\r\n  }\r\n\r\n  return (\r\n    <Link\r\n      className='card text-center align-middle text-white bg-dark border-dark shadow'\r\n      to={`/home/${design._id}`}\r\n    >\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title\">\r\n          {design.designName}\r\n        </h5>\r\n        <img src={design.svgLink} height='auto' width='auto' className=\"card-img-top\" style={{ background: randomHSLA() }} alt=\"sweet design\"></img>\r\n        \r\n      </div>\r\n      <div className='card-footer'>\r\n        <p>created on {formatDate(design.created_at)}</p>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({}, dispatch);\r\n}\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(DesignCard);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { getUserDesigns } from '../actions/index';\r\nimport DesignCard from './DesignCard';\r\n\r\nclass DesignGrid extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.renderDesigns = this.renderDesigns.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // this.props.getUserDesigns(this.props.auth.id)\r\n  }\r\n\r\n  renderDesigns(designArray) {\r\n\r\n    return (designArray.map(design => {\r\n      return <DesignCard design={design} key={design._id} />\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.designs) {\r\n      return (\r\n        <h1>Nothing to see here yet... hold please...</h1>\r\n      );\r\n    } else if (this.props.designs.length === 0) {\r\n      return (\r\n        <div>\r\n          <h4>Hey! Looks like there aren't any designs here yet!</h4>\r\n          <h4>Unless we're briefly searching, head to the homepage and make something awesome.</h4>\r\n        </div>\r\n      );\r\n    } else\r\n      console.log(this.props.designs);\r\n      return (\r\n        <div className=\"card-columns mb-4\">\r\n          {this.renderDesigns(this.props.designs)}\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth\r\n    // designs: state.designs\r\n    // categories: state.categories\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({ getUserDesigns }, dispatch);\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(DesignGrid);","import React, { Component } from 'react';\r\nimport { getUserDesigns } from '../actions';\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport DesignGrid from './DesignGrid';\r\n\r\nclass UserHome extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {}\r\n    this.displayDesigns = this.displayDesigns.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.props.getUserDesigns(this.props.auth.id)\r\n  }\r\n\r\n  displayDesigns(){\r\n    if (!this.props.designs) {\r\n      return (\r\n        <h1>Nothing to see here yet... hold please...</h1>\r\n      );\r\n    } else if (this.props.designs.length === 0) {\r\n      return (\r\n        <div>\r\n          <h4>Hey! Looks like you don't have any designs yet!</h4>\r\n          <h4>Unless we're briefly searching, head to the homepage and make something awesome.</h4>\r\n        </div>\r\n      );\r\n    } else{\r\n\r\n      return (\r\n        <DesignGrid designs={this.props.designs} />\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n      <>\r\n      <div className='row'>\r\n        <div className='col-12 text-center'>\r\n          <div className='jumbotron'>\r\n            <h3>{this.props.auth.name}</h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className='row'>\r\n        <div className='col-12'>\r\n          {this.displayDesigns()}\r\n        </div>\r\n      </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    designs: state.designs\r\n    // timeStamp: state.timeStamp\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({ getUserDesigns }, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserHome);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { getDesign } from '../actions/index';\r\nimport Shape from './Shape';\r\n\r\n\r\nclass DesignDetailView extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.props.getDesign(this.props.currentModelId);\r\n  }\r\n\r\n  render(){\r\n    if (!this.props.designs){\r\n      return (\r\n        <div>\r\n          <h3>Hold please, we're loading...</h3>\r\n        </div>\r\n      );\r\n    } else if (this.props.designs.length === 0 || this.props.designs.length === undefined)\r\n      return (\r\n        <div>\r\n          <h3>Your Design is loading, one moment please...</h3>\r\n        </div>\r\n      );\r\n    else {\r\n      return (\r\n        <>\r\n        <div className='row'>\r\n          <div className='col-12'>\r\n            <div>\r\n              Stats for {this.props.designs[0].designName}<br></br>\r\n              Makes: 5<br></br>\r\n              Likes: {this.props.designs[0].likes}<br></br>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='row'>\r\n          <div className='col-8'>\r\n            <Shape url='user' />\r\n          </div>\r\n        </div>\r\n        </>\r\n      );\r\n\r\n    }\r\n    \r\n  }\r\n  \r\n}\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n  \r\n  return {\r\n    auth: state.auth,\r\n    designs: state.designs,\r\n    currentModel: state.currentModel,\r\n    currentModelId: ownProps.match.params.designId\r\n\r\n    // timeStamp: state.timeStamp\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({ getDesign }, dispatch);\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(DesignDetailView);","import React, { Component } from 'react';\r\nimport { getPublicDesigns } from '../actions';\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport DesignGrid from './DesignGrid';\r\n\r\nclass PublicDesigns extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {}\r\n    this.displayDesigns = this.displayDesigns.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.props.getPublicDesigns()\r\n  }\r\n\r\n  displayDesigns(){\r\n    if (!this.props.designs) {\r\n      return (\r\n        <h1>Nothing to see here yet... hold please...</h1>\r\n      );\r\n    } else if (this.props.designs.length === 0) {\r\n      return (\r\n        <div>\r\n          <h4>Hey! Looks like you don't have any designs yet!</h4>\r\n          <h4>Unless we're briefly searching, head to the homepage and make something awesome.</h4>\r\n        </div>\r\n      );\r\n    } else{\r\n\r\n      return (\r\n        <DesignGrid designs={this.props.designs} />\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n      <div className='row'>\r\n        <div className='col-12'>\r\n          {this.displayDesigns()}\r\n        </div>\r\n      </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth,\r\n    designs: state.designs\r\n    // timeStamp: state.timeStamp\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({ getPublicDesigns }, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PublicDesigns);","import React, { Component } from 'react';\r\nimport {Switch, Route, Redirect } from 'react-router-dom';\r\nimport * as actions from '../actions';\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport Navbar from './Navbar';\r\nimport LandingPage from './LandingPage';\r\nimport Signup from './Signup';\r\nimport Signin from './Signin';\r\nimport UserHome from './UserHome';\r\nimport DesignDetailView from './DesignDetailView';\r\nimport PublicDesigns from './PublicDesigns';\r\n\r\nclass App extends Component {\r\n  constructor(props){\r\n    super(props);\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <div className='container main-app'>\r\n          <Switch>\r\n            <Route exact path='/' component={LandingPage} />\r\n            <Route exact path='/signin' component={Signin} />\r\n            <Route exact path='/signup' component={Signup} />\r\n            <Route exact path='/public' component={PublicDesigns} />\r\n            <Route exact path='/home' component={UserHome} />\r\n            <Route exact path='/home/:designId' component={DesignDetailView} />\r\n            <Redirect to='/' />\r\n          </Switch>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    auth: state.auth\r\n    // categories: state.categories\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators(actions, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","import React from 'react';\nimport { BrowserRouter, Switch, Route, Redirect  } from 'react-router-dom';\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers/index\";\n\nimport App from './components/App';\nimport Signin from './components/Signin';\nimport Signup from './components/Signup';\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\nimport './index.css';\n\nconst store = createStore(rootReducer, {}, applyMiddleware(thunk));\n\nrender(\n  <Provider store={store}>\n    < BrowserRouter>\n      <Switch>\n        <Route path=\"/\" component={App} />\n        \n        {/* <Redirect to='/' /> */}\n      </Switch>\n    </ BrowserRouter>\n  </Provider>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}