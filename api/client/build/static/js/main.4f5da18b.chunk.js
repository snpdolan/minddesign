(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){e.exports=n(71)},69:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(35),o=n(14),c=n(5),l=n(7),s=n(9),u=n(8),d=n(10),m=n(6),h=n(2),p=n(18),v=n.n(p),f=function(e){return function(t){v.a.post("public/sig.svg",{data:e}).then(function(e){t({type:"SAVE_DRAWING",payload:e.data})}).catch(function(e){console.log(e)})}},b=function(e){return function(t){var n="".concat("http://localhost:8000/","?"),a="",r=e.fileString,i=e.extrude;r&&(a+="file=".concat(r,"&")),i&&(a+="extrude=".concat(i,"&")),a.length>0&&(n+=a),v.a.get(n).then(function(e){console.log(e),t({type:"RENDER_DRAWING",payload:e.data})}).catch(function(e){console.log(e)})}},w=n(12),g=n.n(w),E=function e(){Object(c.a)(this,e),this.writeData=function(e,t){return g.a.setItem(e,t)},this.readData=function(e){return g.a.getItem(e)},this.removeData=function(e){return g.a.removeItem(e)},this.clear=function(){return g.a.clear()}},y=n(31),D=n.n(y),S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).clear=function(){n.sigPad.clear()},n.renderDrawing=function(){n.setState({svgDataURL:n.sigPad.toDataURL("image/svg+xml")},function(){var e=n.state.svgDataURL.split(",");n.props.updateDrawing(atob(e[1]))})},n.cache=new E,n.state={svgDataURL:null},n.sigPad={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(D.a,{ref:function(t){e.sigPad=t},penColor:"black",backgroundColor:"rgb(255,255,255)",canvasProps:{width:300,height:300,minwidth:30,maxwidth:35,mindistance:10,throttle:0,className:"sigCanvas mb-2"}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-secondary btn-lg mr-4",onClick:this.clear},"Clear"),r.a.createElement("button",{className:"btn btn-success btn-lg",onClick:this.renderDrawing},"Render"))))}}]),t}(a.Component);var O=Object(m.b)(function(e){return{timeStamp:e.timeStamp}},function(e){return Object(h.b)({updateDrawing:f},e)})(S),N=n(32);window.THREE=N,n(64),n(65),n(66),n(67);var j=window.THREE,k=new j.Scene;k.background=new j.Color(11579568);var x,C,M=new j.GridHelper(160,10);M.rotation.x=Math.PI/2,k.add(M),window.innerWidth<=768?(x=.8*window.innerWidth,C=.5*window.innerHeight):(x=.37*window.innerWidth,C=.5*window.innerHeight);var P=new j.PerspectiveCamera(50,x/C,1,1e3);P.position.set(0,0,200);var R=new j.WebGLRenderer({antialias:!0});R.setPixelRatio(window.devicePixelRatio),R.setSize(x,C),new j.OrbitControls(P,R.domElement).screenSpacePanning=!0;var W,G=new j.SVGLoader,I=(new j.STLExporter,document.createElement("a"));I.style.display="none",document.body.appendChild(I);var L=function e(){requestAnimationFrame(e),R.render(k,P)},A=function(){window.innerWidth<=768?(x=.8*window.innerWidth,C=.5*window.innerHeight):(x=.37*window.innerWidth,C=.5*window.innerHeight),P.aspect=x/C,P.updateProjectionMatrix(),R.setSize(x,C)},B=function e(t){for(;t.children.length>1;)e(t.children[t.children.length-1]),t.remove(t.children[t.children.length-1]);t.geometry&&t.geometry.dispose(),void 0!==t.material&&(void 0!==t.material.length?t.material.forEach(function(e){e.dispose()}):t.material.dispose()),t.texture&&t.texture.dispose()},H=function(e){for(var t=e.filter(function(e){return 0!==e}),n=[],a=0;a<t.length;a+=2){var r=new j.Vector2(t[a],t[a+1]);n.push(r)}return n},T=function(e,t){G.load(e,function(e){var n,a=e.paths;W=new j.Group;var r={depth:6,steps:1,bevelEnabled:!1,bevelThickness:2,bevelSize:4,bevelSegments:1};t?(n=.6,W.position.x=-85,W.position.y=85):(n=.25,W.position.x=-70,W.position.y=70),W.scale.multiplyScalar(n),W.scale.y*=-1;for(var i=0;i<a.length;i++){var o=a[i],c=o.userData.style.fill;if(void 0!==c&&"none"!==c)for(var l=new j.MeshBasicMaterial({color:(new j.Color).setStyle(c),opacity:o.userData.style.fillOpacity,transparent:o.userData.style.fillOpacity<1,side:j.DoubleSide,depthWrite:!1}),s=o.toShapes(!0),u=0;u<s.length;u++){var d=s[u],m=new j.ShapeBufferGeometry(d),h=new j.Mesh(m,l);W.add(h)}var p=o.userData.style.stroke;if(void 0!==p&&"none"!==p){for(var v=new j.MeshBasicMaterial({color:(new j.Color).setStyle(p),opacity:o.userData.style.strokeOpacity,transparent:o.userData.style.strokeOpacity<1,side:j.DoubleSide,depthWrite:!1}),f=new j.MeshBasicMaterial({color:65535,opacity:.3,transparent:!0,side:j.DoubleSide,depthWrite:!1,wireframe:!1}),b=0,w=o.subPaths.length;b<w;b++){var g,E,y,D=o.subPaths[b];if(t){if(b<o.subPaths.length){g=new j.SVGLoader.pointsToStroke(D.getPoints(),o.userData.style);for(var S=H(g.attributes.position.array),O=0;O<S.length;O+=3){var N=new j.Shape([S[O],S[O+1],S[O+2]]);N&&(y=new j.ExtrudeBufferGeometry(N,r),E=new j.Mesh(y,v),W.add(E))}}if(0===i){var x=new j.CylinderBufferGeometry(135,135,3,64),C=new j.Mesh(x,[v,f]);C.position.set(-W.position.x*(1+W.scale.x)+3,W.position.y*(1-W.scale.y)+3,1.5),C.rotation.set(Math.PI/2,0,0),W.add(C)}}else b<o.subPaths.length&&(g=new j.SVGLoader.pointsToStroke(D.getPoints(),o.userData.style))&&(E=new j.Mesh(g,v),W.add(E))}k.add(W)}}},function(e){},function(e){console.log("An error happened")})},V=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={circle:!0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mount.appendChild(R.domElement),T("public/tiger.svg",!1),window.addEventListener("resize",A,!1),L()}},{key:"componentDidUpdate",value:function(){B(k),T("public/sig.svg",!0),L()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-block btn-success mb-2",onClick:function(e){e.preventDefault()}},"Save As 3D Model"),r.a.createElement("div",{ref:function(t){return e.mount=t}}),r.a.createElement("button",{className:"btn btn-block btn-primary",onClick:function(e){return B(k)}},"Clear Canvas"))))}}]),t}(a.Component);var U=Object(m.b)(function(e){return{currentMesh:e.currentMesh,timeStamp:e.timeStamp}},function(e){return Object(h.b)({renderDrawing:b},e)})(V),z=function(e){function t(e){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container main-app"},r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h1",null,"Working Title")),r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("p",null," We'll probably put some user info here?"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6 mb-4"},r.a.createElement(U,null)),r.a.createElement("div",{className:"col-12 col-md-6 canvas text-center mb-5"},r.a.createElement(O,null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-1"})))}}]),t}(a.Component);var _=Object(m.b)(null,null)(z),F=n(33),J=(new E,new E,Object(h.c)({timeStamp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"SAVE_DRAWING":return{timeStamp:new Date};default:return e}},currentMesh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RENDER_DRAWING":return t.payload.data;default:return e}}})),q=(n(68),n(69),Object(h.d)(J,{},Object(h.a)(F.a)));Object(o.render)(r.a.createElement(m.a,{store:q},r.a.createElement(i.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null)))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.4f5da18b.chunk.js.map